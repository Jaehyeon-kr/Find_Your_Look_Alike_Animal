<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‹¹ì‹ ì€ ì–´ë–¤ ë™ë¬¼ì„ ë‹®ì•˜ì„ê¹Œìš”?</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #ffffff;
            text-align: center;
            padding: 50px;
        }

        h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 30px;
        }

        /* ì—…ë¡œë“œ ì¹´ë“œ */
        .form-wrap {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        form {
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: inline-block;
        }
        input[type="file"] {
            margin: 20px 0;
        }
        input[type="submit"] {
            background-color: #6a7581;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
        }
        input[type="submit"]:hover {
            background-color: #bd7ba4;
        }

        /* ê²°ê³¼ ì¹´ë“œ */
        .result-wrap {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }
        .result-card {
            background-color: #fff;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            text-align: center;  /* ì¹´ë“œ ì•ˆì—ì„œ ì‚¬ì§„/ê¸€ì”¨ ëª¨ë‘ ê°€ìš´ë° */
        }
        .result-card img {
            margin: 15px auto 0;
            width: 260px;
            height: 260px;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            object-fit: cover;
            display: block;
        }

        p {
            margin: 8px 0;
            line-height: 1.6;
        }
        h2 {
            margin-bottom: 20px;
        }
        h3 {
            margin-top: 20px;
        }

        .share-box {
            margin-top: 25px;
        }
        .share-btn {
            background-color: #6a7581;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        .share-btn:hover {
            background-color: #bd7ba4;
        }
        .share-link-text {
            font-size: 13px;
            color: #777;
            margin-top: 8px;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <h1>ğŸ¾ ë™ë¬¼ ì´ë¯¸ì§€ ë¶„ë¥˜ê¸°</h1>

    {# ì—…ë¡œë“œ í¼: show_form=Trueì¼ ë•Œë§Œ í‘œì‹œ #}
    {% if show_form %}
    <div class="form-wrap">
        <form method="POST" enctype="multipart/form-data">
            <input type="file" name="file" accept="image/*" required>
            <br>
            <input type="submit" value="ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì˜ˆì¸¡">
        </form>
    </div>
    {% endif %}

    {# ì˜ˆì¸¡ ê²°ê³¼ê°€ ìˆì„ ë•Œë§Œ ê²°ê³¼ ì¹´ë“œ í‘œì‹œ #}
    {% if filename %}
    <div class="result-wrap">
        <div class="result-card">
            <h2>ì˜ˆì¸¡ ê²°ê³¼</h2>

            <img src="{{ url_for('static', filename='uploads/' + filename) }}" alt="Uploaded Image">

            {# ì˜ì–´ ë¼ë²¨ â†’ í•œê¸€ë¡œ ë³´ê¸° ì¢‹ê²Œ ë§¤í•‘ #}
            {% set label_map = {'cat': 'ê³ ì–‘ì´ìƒ', 'dog': 'ê°•ì•„ì§€ìƒ', 'wild': 'ì•¼ìƒë™ë¬¼ìƒ'} %}
            {% set display_label = label_map.get(label, label) %}

            <p><strong>í´ë˜ìŠ¤:</strong> {{ display_label }}</p>
            <p><strong>í™•ë¥ :</strong> {{ "%.2f"|format(prob * 100) }}%</p>

            {# ë¼ë²¨ë³„ ì„¤ëª… #}
            {% if label == "cat" %}
                <h3>ë„ë„í•˜ì§€ë§Œ ë§¤ë ¥ì ì¸ ê³ ì–‘ì´ìƒ ğŸ˜¼</h3>
                <p>
                    ì²˜ìŒì—” ì¡°ê¸ˆ ì°¨ê°€ì›Œ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ì¹œí•´ì§ˆìˆ˜ë¡ ë”°ëœ»í•œ ë§¤ë ¥ì´ ë“œëŸ¬ë‚˜ëŠ” íƒ€ì…ì´ì—ìš”.
                    ì„¬ì„¸í•œ ì–¼êµ´ê³¼ ë˜ë ·í•œ ì´ëª©êµ¬ë¹„ ë•ë¶„ì— ì‚¬ì§„ì´ ì˜ ë°›ëŠ” í¸ì´ì—ìš”.
                </p>
                <p><strong>ëŒ€í‘œ ì—°ì˜ˆì¸ ì˜ˆì‹œ: ì•„ì´ìœ , ì œë‹ˆ, ìˆ˜ì§€</strong></p>
            {% elif label == "dog" %}
                <h3>ì‚¬ëŒë“¤ì„ í–‰ë³µí•˜ê²Œ ë§Œë“œëŠ” ê°•ì•„ì§€ìƒ ğŸ¶</h3>
                <p>
                    ë°ê³  ì¹œê·¼í•œ ì¸ìƒì„ ê°€ì§„ ë‹¹ì‹ ! ì²˜ìŒ ë³´ëŠ” ì‚¬ëŒê³¼ë„ ê¸ˆë°© ì¹œí•´ì§€ëŠ” íƒ€ì…ì´ì—ìš”.
                    ì›ƒì„ ë•Œ íŠ¹íˆ ë§¤ë ¥ì´ í­ë°œí•´ì„œ ì£¼ë³€ ì‚¬ëŒë“¤ì„ í¸ì•ˆí•˜ê²Œ ë§Œë“¤ì–´ì¤˜ìš”.
                </p>
                <p><strong>ëŒ€í‘œ ì—°ì˜ˆì¸ ì˜ˆì‹œ: ë°•ë³´ê²€, ìœ ì¬ì„, ì¡°ì´</strong></p>
            {% elif label == "wild" %}
                <h3>ì˜ˆì¸¡ ë¶ˆê°€í•œ ë§¤ë ¥ì˜ ì•¼ìƒë™ë¬¼ìƒ ğŸ¾</h3>
                <p>
                    ê°œì„± ê°•í•˜ê³  ììœ ë¡œìš´ ì¸ìƒì„ ê°€ì§„ íƒ€ì…ì´ì—ìš”.
                    í•œ ë²ˆ ë³´ë©´ ì‰½ê²Œ ìŠíˆì§€ ì•ŠëŠ” ë¶„ìœ„ê¸°ë¡œ ì‚¬ëŒë“¤ì˜ ì‹œì„ ì„ ëŒì–´ìš”.
                </p>
            {% endif %}

            {# ê³µìœ  ë§í¬ #}
            {% if share_url %}
            <div class="share-box">
                <button class="share-btn" onclick="copyLink()">ê²°ê³¼ ë§í¬ ë³µì‚¬</button>
                <div id="share-link" class="share-link-text">{{ share_url }}</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <script>
        function copyLink() {
            const el = document.getElementById('share-link');
            if (!el) return;
            const text = el.textContent;
            if (!text) return;

            navigator.clipboard.writeText(text).then(() => {
                alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(() => {
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì§ì ‘ ë³µì‚¬í•´ì£¼ì„¸ìš” ğŸ˜¢');
            });
        }
    </script>
</body>
</html>



